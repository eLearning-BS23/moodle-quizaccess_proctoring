{"version":3,"sources":["../src/validateFace.js"],"names":["define","$","Ajax","Notification","setup","css","click","event","preventDefault","photo","document","getElementById","canvas","video","context","getContext","drawImage","width","height","data","toDataURL","setAttribute","courseid","value","cmid","profileimage","call","methodname","args","done","res","warnings","length","status","style","display","addNotification","message","type","fail","exception"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgC,CAC5B,MAAO,CACHC,KAAK,CAAE,gBAAW,CACdH,CAAC,CAAC,qBAAD,CAAD,CAAyBI,GAAzB,CAA6B,SAA7B,CAAwC,KAAxC,EAEAJ,CAAC,CAAC,aAAD,CAAD,CAAiBK,KAAjB,CAAuB,SAASC,CAAT,CAAgB,CACnCA,CAAK,CAACC,cAAN,GADmC,GAE7BC,CAAAA,CAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAFqB,CAG7BC,CAAM,CAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAHoB,CAI7BE,CAAK,CAAGH,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAJqB,CAK7BG,CAAO,CAAGF,CAAM,CAACG,UAAP,CAAkB,IAAlB,CALmB,CAMnCD,CAAO,CAACE,SAAR,CAAkBH,CAAlB,CAAyB,CAAzB,CAA4B,CAA5B,CAA+BD,CAAM,CAACK,KAAtC,CAA6CL,CAAM,CAACM,MAApD,EACA,GAAMC,CAAAA,CAAI,CAAGP,CAAM,CAACQ,SAAP,CAAiB,WAAjB,CAAb,CACAX,CAAK,CAACY,YAAN,CAAmB,KAAnB,CAA0BF,CAA1B,EARmC,GAU7BG,CAAAA,CAAQ,CAAGZ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCY,KAVrB,CAW7BC,CAAI,CAAGd,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCY,KAXb,CAY7BE,CAAY,CAAGf,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCY,KAZ1B,CA0BnCrB,CAAI,CAACwB,IAAL,CAAU,CALM,CACZC,UAAU,CATK,qCAQH,CAEZC,IAAI,CATO,CACX,SAAYN,CADD,CAEX,KAAQE,CAFG,CAGX,aAAgBC,CAHL,CAIX,cAAiBN,CAJN,CAOC,CAKN,CAAV,EAAqB,CAArB,EAAwBU,IAAxB,CAA6B,SAASC,CAAT,CAAc,CACvC,GAA0B,CAAtB,CAAAA,CAAG,CAACC,QAAJ,CAAaC,MAAjB,CAA6B,CACzB,GAAMC,CAAAA,CAAM,CAAGH,CAAG,CAACG,MAAnB,CACA,GAAe,SAAX,GAAAA,CAAJ,CAA0B,CACtBhC,CAAC,CAAC,QAAD,CAAD,CAAYI,GAAZ,CAAgB,QAAhB,CAA0B,kBAA1B,EACAK,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCuB,KAAzC,CAA+CC,OAA/C,CAAyD,MAAzD,CACAzB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCuB,KAAvC,CAA6CC,OAA7C,CAAuD,OAC1D,CAJD,IAIO,CACHlC,CAAC,CAAC,QAAD,CAAD,CAAYI,GAAZ,CAAgB,QAAhB,CAA0B,gBAA1B,CACH,CACJ,CATD,IASO,CACH,GAAIQ,CAAJ,CAAW,CACPV,CAAY,CAACiC,eAAb,CAA6B,CACzBC,OAAO,CAAE,+CADgB,CAEzBC,IAAI,CAAE,OAFmB,CAA7B,CAIH,CACJ,CACJ,CAlBD,EAkBGC,IAlBH,CAkBQpC,CAAY,CAACqC,SAlBrB,CAoBH,CA9CD,EA+CA,QACH,CApDE,CAsDV,CAxDC,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'],\r\n    function($, Ajax, Notification) {\r\n        return {\r\n            setup: function() {\r\n                $(\"#fgroup_id_buttonar\").css(\"padding\", \"5px\");\r\n\r\n                $(\"#fcvalidate\").click(function(event) {\r\n                    event.preventDefault();\r\n                    const photo = document.getElementById('photo');\r\n                    const canvas = document.getElementById('canvas');\r\n                    const video = document.getElementById('video');\r\n                    const context = canvas.getContext('2d');\r\n                    context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n                    const data = canvas.toDataURL('image/png');\r\n                    photo.setAttribute('src', data);\r\n\r\n                    const courseid = document.getElementById('courseidval').value;\r\n                    const cmid = document.getElementById('cmidval').value;\r\n                    const profileimage = document.getElementById('profileimage').value;\r\n                    const wsfunction = 'quizaccess_proctoring_validate_face';\r\n                    const params = {\r\n                        'courseid': courseid,\r\n                        'cmid': cmid,\r\n                        'profileimage': profileimage,\r\n                        'webcampicture': data,\r\n                    };\r\n\r\n                    const request = {\r\n                        methodname: wsfunction,\r\n                        args: params\r\n                    };\r\n\r\n                    Ajax.call([request])[0].done(function(res) {\r\n                        if (res.warnings.length < 1) {\r\n                            const status = res.status;\r\n                            if (status === 'success') {\r\n                                $(\"#video\").css(\"border\", \"10px solid green\");\r\n                                document.getElementById(\"validate_form\").style.display = \"none\";\r\n                                document.getElementById(\"accept_form\").style.display = \"block\";\r\n                            } else {\r\n                                $(\"#video\").css(\"border\", \"10px solid red\");\r\n                            }\r\n                        } else {\r\n                            if (video) {\r\n                                Notification.addNotification({\r\n                                    message: 'Something went wrong during taking the image.',\r\n                                    type: 'error'\r\n                                });\r\n                            }\r\n                        }\r\n                    }).fail(Notification.exception);\r\n\r\n                });\r\n                return true;\r\n            }\r\n        };\r\n    });\r\n"],"file":"validateFace.min.js"}