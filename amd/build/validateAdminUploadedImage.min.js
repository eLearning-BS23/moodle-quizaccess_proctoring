define("quizaccess_proctoring/validateAdminUploadedImage",["jquery","core/ajax","core/notification","core/str"],(function($,Ajax,Notification,str){const detectface=async(input,croppedImage)=>{const output=await faceapi.detectAllFaces(input);if(0===output.length)console.log("Face not found");else{let detections=output[0].box;await(async(imageRef,box,croppedImage)=>{const regionsToExtract=[new faceapi.Rect(box.x,box.y,box.width,box.height)];let faceImages=await faceapi.extractFaces(imageRef,regionsToExtract);0===faceImages.length?console.log("Face not found"):faceImages.forEach((cnv=>{croppedImage.src=cnv.toDataURL()}))})(input,detections,croppedImage)}};return{async setup(modelurl){await faceapi.nets.ssdMobilenetv1.loadFromUri(modelurl),$("#fitem_id_user_photo").append('<img id="cropimg" style="display:none;"/><img id="previewimg" style="display:none;" height="auto" width="auto"/>');let previewImage,submitBtn=document.getElementById("id_submitbutton");submitBtn&&(submitBtn.style.display="none");const intervalToGetImage=setInterval((async function(){let preview=document.getElementsByClassName("realpreview");if(preview.length>0){previewImage=document.getElementById("previewimg");const splitArray=preview[0].src.split("?");if(previewImage.src=splitArray[0],await detectface(previewImage,croppedImage),console.log(previewImage.src),console.log(croppedImage.src),croppedImage.src){console.log("Face found"),submitBtn&&(submitBtn.style.display="block",clearInterval(intervalToGetImage));let alertDangers=document.getElementsByClassName("alert-danger");alertDangers.length>0&&(alertDangers[0].style.display="none",console.log(alertDangers[0])),Notification.addNotification({message:"Face found in the uploaded image",type:"success"})}else 0==notificationShown&&(Notification.addNotification({message:"Face not found in the uploaded image",type:"error"}),notificationShown=1),submitBtn&&(submitBtn.style.display="none"),previewImage.src="",console.log("Face not found")}else submitBtn&&(submitBtn.style.display="none")}),1e3);let notificationShown=0,croppedImage=$("#cropimg");return!0}}}));

//# sourceMappingURL=validateAdminUploadedImage.min.js.map