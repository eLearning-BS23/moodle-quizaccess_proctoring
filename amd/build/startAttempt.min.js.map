{"version":3,"file":"startAttempt.min.js","sources":["../src/startAttempt.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'],\n    function($, Ajax, Notification) {\n        return {\n            setup: function(props) {\n                // eslint-disable-next-line no-console\n                console.log(props.examurl);\n                $(\"#fcvalidate\").click(function(event) {\n                    event.preventDefault();\n                    const photo = document.getElementById('photo');\n                    const canvas = document.getElementById('canvas');\n                    const video = document.getElementById('video');\n                    const context = canvas.getContext('2d');\n                    context.drawImage(video, 0, 0, canvas.width, canvas.height);\n                    var data = canvas.toDataURL('image/png');\n                    photo.setAttribute('src', data);\n\n                    const courseid = document.getElementById('courseidval').value;\n                    const cmid = document.getElementById('cmidval').value;\n                    const profileimage = document.getElementById('profileimage').value;\n\n                    const wsfunction = 'quizaccess_proctoring_validate_face';\n                    const params = {\n                        'courseid': courseid,\n                        'cmid': cmid,\n                        'profileimage': profileimage,\n                        'webcampicture': data,\n                    };\n\n                    const request = {\n                        methodname: wsfunction,\n                        args: params\n                    };\n                    document.getElementById('loading_spinner').style.display = 'block';\n                    Ajax.call([request])[0].done(function(res) {\n                        if (res.warnings.length < 1) {\n                            document.getElementById('loading_spinner').style.display = 'none';\n                            var status = res.status;\n                            if (status === 'success') {\n                                $(\"#video\").css(\"border\", \"10px solid green\");\n                                $(\"#face_validation_result\").html('<span style=\"color: green\">True</span>');\n                                document.getElementById(\"fcvalidate\").style.display = \"none\";\n                                $(\"#form_activate\").css(\"visibility\", \"visible\");\n                            } else {\n                                $(\"#video\").css(\"border\", \"10px solid red\");\n                                $(\"#face_validation_result\").html('<span style=\"color: red\">False</span>');\n                            }\n                        } else {\n                            document.getElementById('loading_spinner').style.display = 'none';\n                            if (video) {\n                                Notification.addNotification({\n                                    message: 'Something went wrong during taking the image.',\n                                    type: 'error'\n                                });\n                            }\n                        }\n                    }).fail(Notification.exception);\n\n                });\n\n                return true;\n            }\n        };\n    });\n"],"names":["define","$","Ajax","Notification","setup","props","console","log","examurl","click","event","preventDefault","photo","document","getElementById","canvas","video","getContext","drawImage","width","height","data","toDataURL","setAttribute","request","methodname","args","value","style","display","call","done","res","warnings","length","status","css","html","addNotification","message","type","fail","exception"],"mappings":"AAAAA,4CAAO,CAAC,SAAU,YAAa,sBAC3B,SAASC,EAAGC,KAAMC,oBACP,CACHC,MAAO,SAASC,cAEZC,QAAQC,IAAIF,MAAMG,SAClBP,EAAE,eAAeQ,OAAM,SAASC,OAC5BA,MAAMC,qBACAC,MAAQC,SAASC,eAAe,SAChCC,OAASF,SAASC,eAAe,UACjCE,MAAQH,SAASC,eAAe,SACtBC,OAAOE,WAAW,MAC1BC,UAAUF,MAAO,EAAG,EAAGD,OAAOI,MAAOJ,OAAOK,YAChDC,KAAON,OAAOO,UAAU,aAC5BV,MAAMW,aAAa,MAAOF,UAcpBG,QAAU,CACZC,WATe,sCAUfC,KATW,UALEb,SAASC,eAAe,eAAea,WAC3Cd,SAASC,eAAe,WAAWa,mBAC3Bd,SAASC,eAAe,gBAAgBa,oBAOxCN,OAOrBR,SAASC,eAAe,mBAAmBc,MAAMC,QAAU,QAC3D3B,KAAK4B,KAAK,CAACN,UAAU,GAAGO,MAAK,SAASC,KAC9BA,IAAIC,SAASC,OAAS,GACtBrB,SAASC,eAAe,mBAAmBc,MAAMC,QAAU,OAE5C,YADFG,IAAIG,QAEblC,EAAE,UAAUmC,IAAI,SAAU,oBAC1BnC,EAAE,2BAA2BoC,KAAK,0CAClCxB,SAASC,eAAe,cAAcc,MAAMC,QAAU,OACtD5B,EAAE,kBAAkBmC,IAAI,aAAc,aAEtCnC,EAAE,UAAUmC,IAAI,SAAU,kBAC1BnC,EAAE,2BAA2BoC,KAAK,4CAGtCxB,SAASC,eAAe,mBAAmBc,MAAMC,QAAU,OACvDb,OACAb,aAAamC,gBAAgB,CACzBC,QAAS,gDACTC,KAAM,cAInBC,KAAKtC,aAAauC,eAIlB"}